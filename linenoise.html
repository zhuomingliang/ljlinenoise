<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module linenoise</title>
    <link rel="stylesheet" href="http://www.keplerproject.org/doc.css" type="text/css"/>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta http-equiv="Author" content="Fran&ccedil;ois Perrad"/>
  <meta http-equiv="Language" content="en"/>
  <meta http-equiv="Description" content="Module linenoise"/>
  <meta http-equiv="Keywords" content="luajit, linenoise, line, lines, historyadd, addhistory, historysave, savehistory, historyload, loadhistory, setcompletion, addcompletion"/>
</head>

<body>

<div id="container">

<div id="product">
  <div id="product_logo">
    <a href="http://www.lua.org">
      <img alt="Lua" src="http://www.andreas-rozek.de/Lua/Lua-Logo_128x128.png"/>
    </a>
  </div>
  <div id="product_name"><big><strong>ljlinenoise</strong></big></div>
  <div id="product_description">Line editing in pure LuaJIT</div>
</div> <!-- id="product" -->

<div id="main">

<div id="navigation">
<h1>linenoise</h1>
  <ul>
    <li><a href="index.html">Home</a>
      <ul>
        <li><a href="index.html#overview">Overview</a></li>
        <li><a href="index.html#status">Status</a></li>
        <li><a href="index.html#download">Download</a></li>
        <li><a href="index.html#installation">Installation</a></li>
        <li><a href="index.html#license">License</a></li>
      </ul>
    </li>
    <li><strong>The module <code>linenoise</code></strong>
      <ul>
        <li><a href="linenoise.html#reference">Reference</a></li>
        <li><a href="linenoise.html#examples">Examples</a></li>
        <li><a href="linenoise.html#scripts">Scripts</a></li>
      </ul>
    </li>
    <li><a href="http://fperrad.github.io/ljlinenoise">Project</a>
      <ul>
        <li><a href="http://github.com/fperrad/ljlinenoise">Git</a></li>
        <li><script type="text/javascript" src="http://www.ohloh.net/p/712640/widgets/project_thin_badge.js"></script></li>
      </ul>
    </li>
  </ul>
</div> <!-- id="navigation" -->

<div id="content">

<h2><a name="reference"></a>References</h2>

<p>All functions return <code>nil</code> on error;
functions that don't have an obvious return value return <code>true</code> on success.</p>

<h4><code>linenoise( prompt )</code> or <code>line( prompt )</code></h4>

<p>Prompts for a line of input, using prompt as the prompt string.
Returns <code>nil</code> if no more input is available.</p>

<h4><code>lines( prompt )</code></h4>

<p>Iterator over <code>line</code>.</p>

<h4><code>historyadd( line )</code> or <code>addhistory( line )</code></h4>

<p>Adds <code>line</code> to the history list.</p>

<h4><code>historysetmaxlen( length )</code> or <code>sethistorymaxlen( length )</code></h4>

<p>Sets the history list size to <code>length</code>.</p>

<h4><code>historysave( filename )</code> or <code>savehistory( filename )</code></h4>

<p>Saves the history list to <code>filename</code>.</p>

<h4><code>historyload( filename )</code> or <code>loadhistory( filename )</code></h4>

<p>Loads the history list from <code>filename</code>.</p>

<h4><code>clearscreen()</code></h4>

<p>Clears the screen.</p>

<h4><code>setcompletion( callback )</code></h4>

<p>Sets the completion callback. This <code>callback</code> is called with two arguments:</p>

<ul>
  <li>A completions object. Use <code>addcompletion</code> to add a completion to this object.</li>
  <li>The current line of input.</li>
</ul>

<h4><code>addcompletion( completions, string )</code></h4>

<p>Adds string to the list of completions.</p>

<h2><a name="examples"></a>Examples</h2>

<pre class="example">
local L = require 'linenoise'

local function completion (c, s)
    if s:sub(1, 1) == 'h' then
        L.addcompletion(c, 'hello')
        L.addcompletion(c, 'hello there')
    end
end

L.setcompletion(completion)

local history = 'history.txt'
L.historyload(history)

for line in L.lines( 'hello> ') do
    if line ~= '' then
        if line:sub(1, 1) == '/' then
            local len = line:match'/historylen%s+(%d+)'
            if len then
                L.historysetmaxlen(len)
            else
                print("Unreconized command: " .. line)
            end
        else
            print("echo: '" .. line .. "'")
            L.historyadd(line)
            L.historysave(history)
        end
    end
end
</pre>

<h2><a name="scripts"></a>Scripts</h2>

<p>The library is used to implement two Lua <a href="https://en.wikipedia.org/wiki/REPL">REPL</a>
scripts.</p>

<pre class="example">
usage: lrepl [options] [script [args]]
Available options are:
  -e stat  execute string 'stat'
  -i       enter interactive mode after executing 'script'
  -l name  require library 'name'
  -v       show version information
  -E       ignore environment variables
  --       stop handling options
  -        stop handling options and execute stdin
</pre>

<pre class="example">
usage: ljrepl [options]... [script [args]...].
Available options are:
  -e chunk  Execute string 'chunk'.
  -l name   Require library 'name'.
  -b ...    Save or list bytecode.
  -j cmd    Perform LuaJIT control command.
  -O[opt]   Control LuaJIT optimizations.
  -i        Enter interactive mode after executing 'script'.
  -v        Show version information.
  -E        Ignore environment variables.
  --        Stop handling options.
  -         Execute stdin and stop handling options.
</pre>

</div> <!-- id="content" -->

</div> <!-- id="main" -->

<div id="about">
</div> <!-- id="about" -->

</div> <!-- id="container" -->

</body>
</html>
